const when = require('when');
const Jimp = require('jimp');

const _ti = {

    createImage : (options) => {

        let {
            width,
            height,
            bgColor
        } = {
            width : 256,
            height : 256,
            bgColor : 0xFF0000FF,
            ...options
        };

        return when.promise((resolve,reject,notify) => {
            new Jimp(width, height, bgColor, (err, image) =>{
                if(err)
                    reject(err);
                resolve(image);
            });
        });
    },
    
    textToBase64Image : (image, options) => {

        let {
            mimeType
        } = {
            mimeType : Jimp.MIME_PNG,
            ...options
        }

        return when.promise((resolve,reject,notify) => {
            image.getBase64(mimeType, (err, data) => {
                if(err)
                    reject(err);
                resolve(data);
            });
        })
    },
}

module.exports = _ti;